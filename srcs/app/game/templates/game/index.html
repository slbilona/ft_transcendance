<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Jeu de Pong</title>
	<script type="text/javascript">
		window.env = {
			CONTRACT_ADDRESS: "{{ contract_adress }}",
			ALCHEMY_RPC: "{{ alchemy_rpc }}"
		};
	</script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="/static/css/index.css">
	<link rel="stylesheet" href="../../../static/css/index.css">
</head>
<body>
	
	<header class="d-flex flex-wrap justify-content-center py-3 border-bottom">
		<div class="d-flex align-items-center mb-3 mb-md-0 me-md-auto" id="userUsernamePhoto"></div>
		<ul class="nav nav-pills">
			<li class="nav-item"><a href="/liveChat/" class="nav-link" id="liveChatLink">live-chat</a></li>
			<li class="nav-item"><a href="/friend/" class="nav-link" id="friendLink">Amis</a></li>
			<li class="nav-item"><a href="/user/" class="nav-link" id="userLink">Profil</a></li>
			<li class="nav-item"><a href="/historique/" class="nav-link" id="historiqueLink">historique</a></li>
			<li class="nav-item"><a class="nav-link" id="logoutButton">déconnexion</a></li>
			<li class="nav-item auth-button"><a href="/connexion/" class="nav-link" id="boutton-signup-login">connexion/inscription</a></li>
		</ul>
	</header>

	<div id="barre-haut2"></div>
	<div id="centre-contour3" class="container-fluid d-flex justify-content-center align-items-center vh-100">
		<div class="row row-cols-1 row-cols-md-3 g-4 text-center">
			<div class="col">
				<div class="card custom-card">
					<div class="card-body">
						<h1 class="card-title pricing-card-title">Partie à<br>distance</h1>
						<form id="playForm" class="visible">
							{% csrf_token %}
							<fieldset>
								<div class="remote-buttons">
									<input type="radio" name="game_mode" id="remote_1v1" value="remote_1v1" checked>
									<label for="remote_1v1"><span class="gradient-text">Distant 1v1</span></label>
									<br>
									<input type="radio" name="game_mode" id="remote_2v2" value="remote_2v2">
									<label for="remote_2v2"><span class="gradient-text">Distant 2v2</span></label>
								</div>
								<button type="submit" class="btn play-button">Jouer</button>
							</fieldset>
						</form>
					</div>
				</div>
			</div>
			<div class="col">
				<div class="card custom-card">
					<div class="card-body">
						<h1 class="card-title pricing-card-title">Tournoi<br>local</h1>
						<button id="tournamentLink" class="btn play-button" type="button" class="w-100 btn">Jouer</button>
					</div>
				</div>
			</div>

			<div class="col">
				<div class="card custom-card">
					<div class="card-body">
						<h1 class="card-title pricing-card-title">Partie<br>locale</h1>
						<form id="playForm2" class="visible">
							{% csrf_token %}
							<fieldset>
								<div class="remote-buttons">
									<input type="radio" name="game_mode" id="local_1v1" value="local_1v1" checked>
									<label for="local_1v1"><span class="gradient-text">Local 1v1</span></label>
									<br>
									<input type="radio" name="game_mode" id="local_2v2" value="local_2v2">
									<label for="local_2v2"><span class="gradient-text">Local 2v2</span></label>
								</div>
								<button type="submit" class="btn play-button">Jouer</button>
							</fieldset>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="barre-bas2"></div>
	<div id="barre-bas1"></div>
	<div id="notification-popup" class="notification-popup"></div>


	<div class="modal" id="gameModal" tabindex="-1" aria-labelledby="gameModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="gameModalLabel">Jeu de Pong</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<canvas id="gameCanvas" width="800" height="600"></canvas>
				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" id="authModal" tabindex="-1" aria-labelledby="authModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="authModalLabel">Authentification</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<ul class="nav nav-tabs nav-fill" id="authTabs" role="tablist">
						<li class="nav-item" role="presentation">
							<button class="nav-link barre-choix" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab" aria-controls="login" aria-selected="true">Connexion</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link barre-choix" id="signup-tab" data-bs-toggle="tab" data-bs-target="#signup" type="button" role="tab" aria-controls="signup" aria-selected="false">Inscription</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link barre-choix" id="auth42-tab" data-bs-toggle="tab" data-bs-target="#auth42" type="button" role="tab" aria-controls="auth42" aria-selected="false">Inscription/Connexion via 42</button>
						</li>
					</ul>
					<div class="tab-content" id="authTabsContent">
						<div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab">
							<form id="loginForm" class="mt-3">
								{% csrf_token %}
								<div class="mb-3">
									<label for="loginUsername" class="form-label">Nom d'utilisateur</label>
									<input type="text" class="form-control" id="loginUsername" name="username" required>
								</div>
								<div class="mb-3">
									<label for="loginPassword" class="form-label">Mot de passe</label>
									<input type="password" class="form-control" id="loginPassword" name="password" required>
								</div>
								<button type="submit" class="btn">Se connecter</button>
							</form>
						</div>
						<div class="tab-pane fade" id="signup" role="tabpanel" aria-labelledby="signup-tab">
							<form id="signupForm" class="mt-3" method="POST" enctype="multipart/form-data">
								{% csrf_token %}
								<div class="mb-3">
									<label for="signupUsername" class="form-label">Nom d'utilisateur</label>
									<input type="text" class="form-control" id="signupUsername" name="username" required>
								</div>
								<div class="mb-3">
									<label for="signupAlias" class="form-label">Alias</label>
									<input type="text" class="form-control" id="signupAlias" name="alias" required>
								</div>
								<div class="mb-3">
									<label for="signupEmail" class="form-label">Email</label>
									<input type="email" class="form-control" id="signupEmail" name="email" required>
								</div>
								<div class="mb-3">
									<label for="signupPassword" class="form-label">Mot de passe</label>
									<input type="password" class="form-control" id="signupPassword" name="password" required>
								</div>
								<div class="mb-3">
									<label for="profilePhoto" class="form-label">Photo de profil</label>
									<input type="file" class="form-control" id="profilePhoto" name="photoProfile" accept="image/*" title="Choisir un fichier">
								</div>
								<button type="submit" class="btn">S'inscrire</button>
							</form>
						</div>
						<div class="tab-pane fade" id="auth42" role="tabpanel" aria-labelledby="auth42-tab">
							<div class="mt-3">
								<p>Connectez-vous avec votre compte 42 en cliquant sur le bouton ci-dessous :</p>
								<button id="auth42Button" class="btn">42</button>
							</div>
						</div>                        
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div class="modal fade" id="friendModal" tabindex="-1" aria-labelledby="friendModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="friendModalLabel">Gestion des amis</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body" id="friendModalBody">

				</div>
			</div>
		</div>
	</div>
	
	<div class="modal fade" id="friendProfileModal" tabindex="-1" aria-labelledby="friendProfileModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="friendProfileModalLabel">Profil de l'ami</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body" id="friendProfileContent">
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="userModalLabel">Profile</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body" id="userModalBody">
					<div class="custom-tabs-container">
						<ul class="nav nav-tabs nav-fill" id="userProfileTabs" role="tablist">
							<li class="nav-item" role="presentation">
								<button class="nav-link custom-tab-button barre-choix" id="profile-view-tab"
								data-bs-toggle="pill" data-bs-target="#profile-view" type="button" role="tab"
								aria-controls="profile-view" aria-selected="true">Votre profil</button>
							</li>
							<li class="nav-item" role="presentation">
								<button class="nav-link custom-tab-button barre-choix" id="profile-edit-tab" data-bs-toggle="pill"
								data-bs-target="#profile-edit" type="button" role="tab" aria-controls="profile-edit"
								aria-selected="false">Modifier votre profil</button>
							</li>
						</ul>
					</div>
					<div class="tab-content custom-tab-content" id="userProfileTabsContent">
						<div class="tab-pane fade show active" id="profile-view" role="tabpanel" aria-labelledby="profile-view-tab"></div>
						<div class="tab-pane fade" id="profile-edit" role="tabpanel" aria-labelledby="profile-edit-tab"></div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="liveChatModal" tabindex="-1" aria-labelledby="liveChatLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="liveChatLabel">Live-Chat</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div id="liste-amis-live-chat">
						<!-- Champ de recherche -->
						<input type="text" id="searchInput" placeholder="Rechercher un utilisateur">

						<!-- Conteneur pour afficher les résultats -->
						<div id="userListContainer"></div>
						<ul id="liste-amis-live-chat-ul"></ul>

					</div>
					<div id="conversation-live-chat">
						<div id="en-tete-conversation-live-chat"></div>
						<div id="message-container"></div>
						<div id="envoie-ou-message-bloque"></div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<div class="modal fade" id="remoteGameAvailableModal" tabindex="-1" aria-labelledby="remoteGameAvailableLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="remoteGameAvailableLabelh5"></h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body main-content"></div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="tournamentModal" tabindex="-1" aria-labelledby="tournamentModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="tournamentModalLabel" data-i18n="tournamentModalTitle">Créer un tournoi</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<form id="tournamentForm">
						<div class="mb-3">
							<p for="playerCount" class="form-label" data-i18n="playerCount">Nombre de joueurs</p>
							<select class="form-select" id="playerCount" required>
								<option value="4">4</option>
								<option value="8">8</option>
							</select>
						</div>
						<div id="aliasInputs">
						</div>
						<button type="submit" class="btn" data-i18n="createTournament">Créer le tournoi</button>
					</form>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="tournamentResultsModal" tabindex="-1" aria-labelledby="tournamentResultsModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="tournamentResultsModalLabel" data-i18n="tournamentResultsModalTitle">Résultat du tournoi</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div id="divTournamentResults"></div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="nextGameModal" tabindex="-1" aria-labelledby="nextGameModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
		<div class="modal-dialog modal-lg modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="nextGameModalLabel">Prochaine partie</h5>
				</div>
				<div class="modal-body text-center">
					<button type="button" class="btn" id="startNextGameButton">Jouer</button>
				</div>
				<div class="modal-body">
					<form id="nextGameForm">
					</form>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="historiqueModal" tabindex="-1" aria-labelledby="historiqueModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="historiqueModalLabel" data-i18n="historiqueModalTitle">Historique des parties</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<form id="historiqueForm">
					</form>
				</div>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/ethers@5.6.9/dist/ethers.umd.min.js"></script>
	<script src="/static/js/csrf_utils.js"></script>
	<script src="/static/js/erreurs.js"></script>
	<script src="/static/js/auth.js"></script>
	<script src="/static/js/friends.js"></script>
	<script src="/static/js/main.js"></script>
	<script src="/static/js/tournament.js"></script>
	<script src="/static/js/historique.js"></script>
	<script src="/static/js/user.js"></script> 
	<script src="/static/js/settings.js"></script>
	<script src="/static/js/liveChat.js"></script>
</body>
</html>
